<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garmin Health Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <link rel="stylesheet" href="/static/css/app.css">
</head>
<body class="bg-gray-900 min-h-screen">

    <!-- Header -->
    <header class="bg-gray-800 border-b border-gray-700 px-4 sm:px-6 py-4 sticky top-0 z-10">
        <div class="max-w-7xl mx-auto flex items-center justify-between flex-wrap gap-3">
            <div class="flex items-center gap-3">
                <svg class="w-6 h-6 text-blue-400 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                </svg>
                <h1 class="text-lg font-bold text-white">Garmin Health</h1>
            </div>
            <div class="flex items-center gap-2 sm:gap-3">
                <button id="btn-prev" class="text-gray-400 hover:text-white px-2 py-1 rounded hover:bg-gray-700 transition">&larr;</button>
                <input type="date" id="date-picker"
                       class="bg-gray-700 text-white rounded-lg px-3 py-1.5 border border-gray-600
                              focus:border-blue-500 focus:outline-none text-sm">
                <button id="btn-next" class="text-gray-400 hover:text-white px-2 py-1 rounded hover:bg-gray-700 transition">&rarr;</button>
                <button id="btn-today"
                        class="text-sm text-blue-400 hover:text-blue-300 px-3 py-1.5 rounded hover:bg-gray-700 transition">
                    Today
                </button>
                <div class="w-px h-6 bg-gray-600 mx-1 hidden sm:block"></div>
                <button id="btn-logout"
                        class="text-gray-400 hover:text-white text-sm px-3 py-1.5 rounded hover:bg-gray-700 transition">
                    Logout
                </button>
            </div>
        </div>
    </header>

    <!-- Loading overlay -->
    <div id="loading" class="hidden fixed inset-0 bg-gray-900/50 z-20 flex items-center justify-center">
        <div class="bg-gray-800 px-6 py-4 rounded-xl text-white flex items-center gap-3">
            <svg class="animate-spin h-5 w-5 text-blue-400" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
            </svg>
            Loading data...
        </div>
    </div>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 py-6">

        <!-- Summary Cards -->
        <div id="summary-cards" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4 mb-6">
            <!-- Filled dynamically -->
        </div>

        <!-- Intraday Charts -->
        <h2 class="text-gray-400 text-xs font-semibold uppercase tracking-wider mb-3">Intraday Detail</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-8">
            <div class="bg-gray-800 rounded-xl p-4">
                <h3 class="text-white font-semibold text-sm mb-3">Sleep Stages</h3>
                <canvas id="chart-sleep-stages"></canvas>
            </div>
            <div class="bg-gray-800 rounded-xl p-4">
                <h3 class="text-white font-semibold text-sm mb-3">Body Battery</h3>
                <canvas id="chart-body-battery"></canvas>
            </div>
            <div class="bg-gray-800 rounded-xl p-4">
                <h3 class="text-white font-semibold text-sm mb-3">Stress Level</h3>
                <canvas id="chart-stress"></canvas>
            </div>
            <div class="bg-gray-800 rounded-xl p-4">
                <h3 class="text-white font-semibold text-sm mb-3">Heart Rate Variability</h3>
                <canvas id="chart-hrv"></canvas>
            </div>
            <div class="bg-gray-800 rounded-xl p-4">
                <h3 class="text-white font-semibold text-sm mb-3">SpO2 (Blood Oxygen)</h3>
                <canvas id="chart-spo2"></canvas>
            </div>
            <div class="bg-gray-800 rounded-xl p-4">
                <h3 class="text-white font-semibold text-sm mb-3">Breathing Rate</h3>
                <canvas id="chart-breathing"></canvas>
            </div>
        </div>

        <!-- 7-Day Trends -->
        <h2 class="text-gray-400 text-xs font-semibold uppercase tracking-wider mb-3">7-Day Trends</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">
            <div class="bg-gray-800 rounded-xl p-4">
                <h3 class="text-white font-semibold text-sm mb-3">Sleep Score</h3>
                <canvas id="chart-sleep-trend"></canvas>
            </div>
            <div class="bg-gray-800 rounded-xl p-4">
                <h3 class="text-white font-semibold text-sm mb-3">Resting Heart Rate</h3>
                <canvas id="chart-rhr-trend"></canvas>
            </div>
        </div>
    </main>

    <script src="/static/js/api.js"></script>
    <script src="/static/js/charts.js"></script>
    <script src="/static/js/dashboard.js"></script>
</body>
</html>
